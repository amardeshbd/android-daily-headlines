machine:
    java:
        version: oraclejdk8

dependencies:
    pre:
        - (echo y; echo y; echo y; echo y; echo y; echo y) | $ANDROID_HOME/tools/bin/sdkmanager --licenses
        - echo y | android update sdk --no-ui --all --filter "tools"
        - echo y | android update sdk --no-ui --all --filter "platform-tools"
        - echo y | android update sdk --no-ui --all --filter "build-tools"
        - echo y | android update sdk --no-ui --all --filter "build-tools-27.0.3"
        - echo y | android update sdk --no-ui --all --filter "android-27"
        - echo y | android update sdk --no-ui --all --filter "extra-google-m2repository"
        - echo y | android update sdk --no-ui --all --filter "extra-google-google_play_services"
        - echo y | android update sdk --no-ui --all --filter "extra-android-support"
        - echo y | android update sdk --no-ui --all --filter "extra-android-m2repository"

dependencies:
    # Added based on https://discuss.circleci.com/t/licences-for-android-build-tools-not-accepted/17285/19
    override:
        - echo y | android update sdk --no-ui --all --filter build-tools-27.0.3,android-27
        - echo y | android update sdk --no-ui --all --filter android-27

test:
    override:
        - ./gradlew assembleDebug